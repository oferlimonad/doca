/* ============================================
   PREMIUM LIGHT MODE - MEDICAL SAAS DESIGN
   Clinical Modernity: Clean, Airy, Trustworthy
   Optimized for Hebrew (RTL) Typography
   ============================================ */

/* --- Typography with Hebrew Support --- */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Hebrew:wght@300;400;500;600;700&display=swap&subset=hebrew');

:root {
    /* Premium Light Mode Color Palette - Medical Grade */
    /* Primary Colors - Trustworthy Medical Blue/Teal */
    --primary: #0EA5E9;              /* Sky-500 - Professional medical blue */
    --primary-hover: #0284C7;        /* Sky-600 - Darker for hover */
    --primary-light: #E0F2FE;        /* Sky-100 - Light accent */
    --secondary: #14B8A6;            /* Teal-500 - Calm green accent */
    --secondary-hover: #0D9488;      /* Teal-600 */
    
    /* Background Colors - Airy & Clean */
    --bg-primary: #FFFFFF;           /* Pure white - Main background */
    --bg-secondary: #F8FAFC;         /* Slate-50 - Page background */
    --bg-tertiary: #F1F5F9;         /* Slate-100 - Surface hover */
    --bg-card: #FFFFFF;              /* Pure white - Card backgrounds */
    --bg-hover: #F1F5F9;             /* Slate-100 - Hover states */
    --bg-input: #F8FAFC;             /* Slate-50 - Input backgrounds */
    --bg-input-focus: #E0F2FE;       /* Sky-100 - Input focus */
    
    /* Text Colors - High Contrast for Readability */
    --text-primary: #0F172A;         /* Slate-900 - Primary text */
    --text-secondary: #475569;       /* Slate-600 - Secondary text */
    --text-tertiary: #64748B;        /* Slate-500 - Tertiary/muted text */
    --text-disabled: #94A3B8;        /* Slate-400 - Disabled text */
    
    /* Accent Colors */
    --accent-primary: #0EA5E9;       /* Primary brand color */
    --accent-primary-hover: #0284C7; /* Primary hover */
    --accent-secondary: #14B8A6;     /* Secondary accent */
    --accent-secondary-hover: #0D9488; /* Teal-600 */
    
    /* Semantic Colors */
    --success: #10B981;             /* Emerald-500 */
    --success-bg: rgba(16, 185, 129, 0.1);
    --warning: #F59E0B;              /* Amber-500 */
    --warning-bg: rgba(245, 158, 11, 0.1);
    --error: #EF4444;                /* Red-500 */
    --error-bg: rgba(239, 68, 68, 0.1);
    --info: var(--primary);
    --info-bg: rgba(14, 165, 233, 0.1);
    
    /* Borders - Subtle, Clean */
    --border-primary: #E2E8F0;      /* Slate-200 - Main borders */
    --border-secondary: #CBD5E1;    /* Slate-300 - Strong borders */
    --border-hover: #94A3B8;        /* Slate-400 - Hover borders */
    --border-focus: #0EA5E9;        /* Sky-500 - Focus borders */
    
    /* Glassmorphism */
    --glass-bg: rgba(255, 255, 255, 0.8);
    --glass-border: rgba(226, 232, 240, 0.8);
    --glass-shadow: 0 8px 32px 0 rgba(15, 23, 42, 0.08);
    
    /* Spacing System - Generous for Airiness (8px base) */
    --space-1: 0.25rem;   /* 4px */
    --space-2: 0.5rem;    /* 8px */
    --space-3: 0.75rem;   /* 12px */
    --space-4: 1rem;      /* 16px */
    --space-5: 1.25rem;   /* 20px */
    --space-6: 1.5rem;    /* 24px */
    --space-8: 2rem;      /* 32px */
    --space-10: 2.5rem;   /* 40px */
    --space-12: 3rem;     /* 48px */
    --space-16: 4rem;     /* 64px */
    --space-20: 5rem;     /* 80px */
    --space-24: 6rem;     /* 96px */
    
    /* Border Radius - Modern, Refined */
    --radius-sm: 0.5rem;     /* 8px */
    --radius-md: 0.75rem;    /* 12px */
    --radius-lg: 1rem;      /* 16px */
    --radius-xl: 1.25rem;    /* 20px */
    --radius-2xl: 1.5rem;    /* 24px */
    --radius-full: 9999px;
    
    /* Shadows - Soft, Layered */
    --shadow-sm: 0 1px 2px 0 rgba(15, 23, 42, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(15, 23, 42, 0.1), 0 2px 4px -2px rgba(15, 23, 42, 0.05);
    --shadow-lg: 0 10px 15px -3px rgba(15, 23, 42, 0.1), 0 4px 6px -4px rgba(15, 23, 42, 0.05);
    --shadow-xl: 0 20px 25px -5px rgba(15, 23, 42, 0.1), 0 8px 10px -6px rgba(15, 23, 42, 0.05);
    --shadow-inner: inset 0 2px 4px 0 rgba(15, 23, 42, 0.05);
    
    /* Transitions - Smooth, Refined */
    --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-base: 200ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: 300ms cubic-bezier(0.4, 0, 0.2, 1);
}

* {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
}

/* Retina Display Optimizations */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    * {
        -webkit-font-smoothing: subpixel-antialiased;
    }
}

body {
    font-family: 'Inter', 'IBM Plex Sans Hebrew', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    font-weight: 400;
    font-size: 0.9375rem; /* 15px */
    color: var(--text-primary);
    background-color: var(--bg-secondary);
    line-height: 1.75; /* Increased for Hebrew diacritics */
    letter-spacing: -0.01em;
    direction: rtl;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* Typography Hierarchy - Medical Professional */
h1, h2, h3, h4, h5, h6 {
    letter-spacing: -0.02em;
    font-weight: 600;
    line-height: 1.4;
    color: var(--text-primary);
}

h1 {
    font-size: 1.875rem; /* 30px */
    letter-spacing: -0.025em;
    line-height: 1.3;
    font-weight: 700;
}

h2 {
    font-size: 1.5rem; /* 24px */
    letter-spacing: -0.02em;
    line-height: 1.35;
    font-weight: 600;
}

h3 {
    font-size: 1.25rem; /* 20px */
    letter-spacing: -0.015em;
    line-height: 1.4;
    font-weight: 600;
}

/* Small labels and dropdown options */
label, select option, .text-sm {
    font-size: 0.875rem; /* 14px */
    line-height: 1.75; /* Increased for Hebrew */
}

/* Footer text */
footer, #globalFooter {
    font-size: 0.8125rem; /* 13px */
}

/* Hero section subtitle alignment */
.hero-medical-static h1 + p {
    display: inline-block;
    width: 100%;
    text-align: right;
    line-height: 1.75;
}

@media (min-width: 1024px) {
    .hero-medical-static h1 + p {
        max-width: none;
    }
}

/* --- Message Notifications --- */
.copy-message {
    transition: opacity var(--transition-base), transform var(--transition-base);
    opacity: 0;
    z-index: 100;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.95);
    pointer-events: none;
    min-width: 300px;
    max-width: 90vw;
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-lg);
    padding: var(--space-4);
}

.copy-message.show {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
}

/* --- Checkboxes - Medical Style --- */
.template-item input[type="checkbox"] {
    margin-right: 0;
    margin-left: 0;
    width: 1.25rem;
    height: 1.25rem;
    accent-color: var(--accent-primary);
    cursor: pointer;
    transition: all var(--transition-fast);
    flex-shrink: 0;
    border-radius: var(--radius-sm);
}

.template-item input[type="checkbox"]:checked + label {
    font-weight: 500;
    color: var(--text-primary);
}

.template-item input[type="checkbox"]:focus {
    outline: 2px solid var(--accent-primary);
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(14, 165, 233, 0.1);
}

/* --- Template Item Content Alignment --- */
.template-group-header .chevron-icon {
    width: 1.25rem;
    height: 1.25rem;
}

/* Group header structure: chevron (1.25rem) + gap-2 (0.5rem) + title text */
/* Template items need to align checkbox with title text start position */
.template-item {
    direction: rtl;
    padding-right: 0 !important; /* No right padding - drag handle sits flush against container edge */
    padding-left: 0 !important; /* No left padding - CRUD buttons will have their own spacing */
    padding-top: 0.5rem !important;
    padding-bottom: 0.5rem !important;
    width: 100%;
    box-sizing: border-box;
    background: var(--bg-card);
    border-radius: var(--radius-md);
    margin-bottom: 0.25rem;
    transition: all var(--transition-base);
    min-width: 0;
    display: flex;
    align-items: center;
    gap: 0.125rem; /* Reduced by 50% from 0.25rem: Minimal gap between drag handle and content area */
    position: relative;
}

/* Drag handle container - flush against right edge (RTL) */
.drag-handle-container {
    margin-right: 0 !important;
    margin-left: 0 !important;
    padding-right: 0 !important;
    padding-left: 0 !important;
    align-self: center;
    flex-shrink: 0;
}

.fallback-move-buttons {
    margin-right: 0 !important;
    margin-left: 0 !important;
    padding-right: 0 !important;
    padding-left: 0 !important;
    align-self: center;
    flex-shrink: 0;
}

/* Template item content - aligns checkbox with group title */
/* Group header: chevron (1.25rem) + gap-2 (0.5rem) + title text */
/* Template items are inside the group container, so checkbox aligns with title start */
.template-item-content {
    margin-right: 0;
    margin-left: 0;
    padding-right: 0;
    padding-left: 0;
    align-items: center;
    display: flex;
    gap: 0.875rem; /* Gap between checkbox and label */
    min-width: 0;
    flex: 1 1 auto;
    width: 100%;
    max-width: 100%;
    overflow: visible; /* Allow sentence text to flow naturally */
    /* Align checkbox with group title: chevron (1.25rem) + gap-2 (0.5rem) = 1.75rem from container inner edge */
    padding-right: calc(1.25rem + 0.5rem) !important; /* chevron + gap */
}

@media (min-width: 640px) {
    .template-item-content {
        /* chevron (1.25rem) + gap-3 (0.75rem) = 2rem */
        padding-right: calc(1.25rem + 0.75rem) !important;
    }
}

@media (min-width: 1024px) {
    .template-item-content {
        /* chevron (1.25rem) + gap-3 (0.75rem) = 2rem (same as sm) */
        padding-right: calc(1.25rem + 0.75rem) !important;
    }
}

.template-item-content label {
    flex: 1 1 auto;
    min-width: 0;
    overflow: visible; /* Allow text to flow naturally */
    margin: 0;
    padding: 0;
    width: 100%; /* Take full available width */
}

.template-item-content label span.block {
    display: inline-flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 0.25rem;
    white-space: normal; /* Allow wrapping when needed */
    overflow: visible;
    width: 100%;
    min-width: 0; /* Allow shrinking if needed, but label has flex: 1 1 auto */
}

/* --- INLINE DYNAMIC ELEMENTS - Seamless Sentence Builder --- */
/* Unified compact height with perfect vertical centering */
.dynamic-element {
    padding: 0.125rem 0.375rem;
    border: none;
    border-bottom: 2px solid var(--border-primary);
    border-radius: 0;
    background: transparent;
    color: var(--text-primary);
    font-size: 0.875rem; /* Uniform font size */
    line-height: 1.5; /* Compact line height for vertical centering */
    display: inline-flex;
    align-items: center; /* Perfect vertical centering */
    justify-content: center;
    height: 1.75rem; /* Unified compact height */
    vertical-align: middle;
    transition: all var(--transition-base);
    font-family: inherit;
    min-width: 60px;
    box-sizing: border-box;
}

/* Input fields - seamless inline style with compact height */
input.dynamic-element.template-input {
    background: var(--bg-input);
    border-bottom: 2px solid var(--border-primary);
    padding: 0.125rem 0.375rem;
    border-radius: var(--radius-sm);
    margin: 0 0.125rem;
    height: 1.75rem; /* Unified compact height */
    line-height: 1.5;
    display: inline-flex;
    align-items: center;
    font-size: 0.875rem; /* Uniform font size */
    text-align: center;
}

input.dynamic-element.template-input:focus {
    outline: none;
    border-bottom-color: var(--border-focus);
    background: var(--bg-input-focus);
    box-shadow: 0 2px 4px rgba(14, 165, 233, 0.1);
}

input.dynamic-element.template-input:hover:not(:disabled) {
    border-bottom-color: var(--border-secondary);
    background: var(--bg-input);
}

/* Dropdown (select) - Badge-like appearance with centered vertical text and compact height */
select.dynamic-element,
.template-select {
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12' fill='none'%3E%3Cpath d='M3 4.5L6 7.5L9 4.5' stroke='%230EA5E9' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: left 0.375rem center;
    background-color: var(--primary-light);
    border: none;
    border-bottom: 2px solid var(--accent-primary);
    padding: 0.125rem 1.5rem 0.125rem 0.375rem;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    vertical-align: middle;
    line-height: 1.5; /* Compact line height */
    height: 1.75rem; /* Unified compact height matching inputs */
    box-sizing: border-box;
    border-radius: var(--radius-sm);
    color: var(--accent-primary);
    font-weight: 500;
    font-size: 0.875rem; /* Uniform font size */
    margin: 0 0.125rem;
    min-width: 80px;
}

select.dynamic-element:focus,
.template-select:focus {
    outline: none;
    border-bottom-color: var(--accent-primary-hover);
    background-color: var(--bg-input-focus);
    box-shadow: 0 2px 4px rgba(14, 165, 233, 0.15);
}

select.dynamic-element:hover:not(:disabled),
.template-select:hover:not(:disabled) {
    border-bottom-color: var(--accent-primary-hover);
    background-color: var(--primary-light);
}

/* RTL support for dropdown arrow */
[dir="rtl"] select.dynamic-element,
[dir="rtl"] .template-select {
    background-position: right 0.375rem center;
    padding-right: 0.375rem;
    padding-left: 1.5rem;
}

/* Dropdown options styling */
select.dynamic-element option,
.template-select option {
    padding: 0.5rem 0.625rem;
    line-height: 1.5; /* Match compact line height */
    background: var(--bg-card);
    color: var(--text-primary);
    font-size: 0.875rem; /* Uniform font size */
}

/* --- Template Item Line Height - Increased for Hebrew --- */
.template-item label {
    line-height: 1.75 !important;
}

.template-item label span {
    line-height: 1.75 !important;
}

.template-item label span span {
    line-height: 1.75 !important;
}

/* Responsive dynamic elements - maintain compact height across breakpoints */
@media (min-width: 640px) {
    .dynamic-element {
        font-size: 0.875rem; /* Keep uniform size */
        padding: 0.125rem 0.5rem;
        height: 1.75rem; /* Maintain compact height */
    }
    
    input.dynamic-element.template-input {
        padding: 0.125rem 0.5rem;
        height: 1.75rem;
        font-size: 0.875rem;
    }
    
    select.dynamic-element,
    .template-select {
        padding: 0.125rem 1.5rem 0.125rem 0.5rem;
        height: 1.75rem;
        font-size: 0.875rem;
        background-position: left 0.5rem center;
    }
    
    [dir="rtl"] select.dynamic-element,
    [dir="rtl"] .template-select {
        background-position: right 0.5rem center;
        padding-right: 0.5rem;
        padding-left: 1.5rem;
    }
}

@media (min-width: 1024px) {
    .dynamic-element {
        font-size: 0.875rem; /* Keep uniform size */
        padding: 0.125rem 0.625rem;
        height: 1.75rem; /* Maintain compact height */
    }
    
    input.dynamic-element.template-input {
        padding: 0.125rem 0.625rem;
        height: 1.75rem;
        font-size: 0.875rem;
    }
    
    select.dynamic-element,
    .template-select {
        padding: 0.125rem 1.5rem 0.125rem 0.625rem;
        height: 1.75rem;
        font-size: 0.875rem;
        background-position: left 0.625rem center;
    }
    
    [dir="rtl"] select.dynamic-element,
    [dir="rtl"] .template-select {
        background-position: right 0.625rem center;
        padding-right: 0.625rem;
        padding-left: 1.5rem;
    }
}

/* --- CRUD Buttons - Minimalist Icon Buttons --- */
.crud-btn {
    padding: 0.5rem;
    border-radius: var(--radius-md);
    font-size: 1rem;
    line-height: 1;
    transition: all var(--transition-fast);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 2rem;
    height: 2rem;
    background: transparent;
    border: none;
    cursor: pointer;
    will-change: transform, opacity;
    backface-visibility: hidden;
    color: var(--text-tertiary);
}

.crud-btn:hover {
    background-color: var(--bg-hover);
    transform: translateY(-1px);
    color: var(--accent-primary);
}

.crud-btn:active {
    transform: scale(0.95) translateY(0);
    transition-duration: 80ms;
}

.crud-btn-delete {
    color: var(--text-tertiary);
    opacity: 0.7;
    transition: all var(--transition-fast);
}

.crud-btn-delete:hover {
    color: var(--error);
    opacity: 1;
    background-color: var(--error-bg);
}

.crud-btn-delete:focus {
    outline: none;
    box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.2);
}

.crud-btn-edit {
    color: var(--text-tertiary);
    opacity: 0.7;
    transition: all var(--transition-fast);
}

.crud-btn-edit:hover {
    color: var(--accent-primary);
    opacity: 1;
    background-color: var(--info-bg);
}

.crud-btn-edit:focus {
    outline: none;
    box-shadow: 0 0 0 2px rgba(14, 165, 233, 0.2);
}

/* --- Scrollbar - Clean Light Mode --- */
.scrollable-content::-webkit-scrollbar {
    width: 6px;
    height: 6px;
}

.scrollable-content::-webkit-scrollbar-track {
    background: transparent;
    border-radius: var(--radius-sm);
}

.scrollable-content::-webkit-scrollbar-thumb {
    background-color: var(--border-secondary);
    border-radius: var(--radius-sm);
    transition: background-color var(--transition-fast);
    border: 1px solid transparent;
    background-clip: padding-box;
}

.scrollable-content::-webkit-scrollbar-thumb:hover {
    background-color: var(--border-hover);
}

/* --- Hero Section Background --- */
/* Full-width background that breaks out of parent padding and starts at top edge */
.hero-medical-static {
    position: relative;
    overflow-x: hidden;
    width: 100vw;
    margin-left: calc(50% - 50vw);
    margin-right: calc(50% - 50vw);
    margin-top: calc(-1rem - 0.5rem); /* Break out of appContainer padding (px-4 = 1rem) and wrapper padding (pt-6 = 1.5rem) */
    margin-bottom: 0;
    background: #F0F9FF; /* Very subtle sky-50 tint for visual separation */
    min-height: 76.67vh; /* Increased by 15% from 66.67vh for more downward expansion */
    display: flex;
    align-items: center;
    padding-top: 0;
    padding-bottom: 2rem;
    border: none;
}

@media (min-width: 640px) {
    .hero-medical-static {
        margin-top: calc(-1.5rem - 0.75rem); /* Break out of appContainer padding (px-6 = 1.5rem) and wrapper padding (pt-8 = 2rem) */
    }
}

@media (min-width: 768px) {
    .hero-medical-static {
        margin-top: calc(-2rem - 1rem); /* Break out of wrapper padding (p-8 = 2rem) */
    }
}

@media (min-width: 1024px) {
    .hero-medical-static {
        margin-top: calc(-2rem - 3rem); /* Break out of wrapper padding (lg:p-12 = 3rem) */
    }
}

@media (min-width: 1280px) {
    .hero-medical-static {
        margin-top: calc(-2rem - 4rem); /* Break out of wrapper padding (xl:p-16 = 4rem) */
    }
}

/* Full-width background that spans entire viewport from top edge */
.hero-medical-static::before {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    background: #F0F9FF; /* Very subtle sky-50 tint for visual separation */
    width: 100vw;
    margin-left: calc(50% - 50vw);
    z-index: 0;
    border: none;
}

/* Content container - constrained to site max-width */
.hero-content-wrapper {
    position: relative;
    z-index: 1;
    max-width: 100rem;
    margin-left: auto;
    margin-right: auto;
    width: 100%;
    padding-top: calc(var(--space-4) + 2rem); /* Account for header height + content spacing */
    padding-bottom: 0;
    padding-left: 2.5rem; /* px-10 */
    padding-right: 2.5rem;
}

/* Inner content container - no background, controls layout and shifts content left (RTL-aware) */
.hero-inner-container {
    background: transparent; /* No background color */
    width: 100%;
    margin-right: 0; /* Start from right in RTL */
    margin-left: auto; /* Shift left (away from right edge) in RTL */
    max-width: 100%;
}

@media (min-width: 640px) {
    .hero-medical-static {
        padding-bottom: 3rem;
    }
    
    .hero-content-wrapper {
        padding-top: calc(var(--space-6) + 3rem);
        padding-left: 3rem; /* px-12 */
        padding-right: 3rem;
    }
    
    .hero-inner-container {
        margin-left: 1.5rem; /* Shift left (away from right edge) in RTL */
    }
}

@media (min-width: 1024px) {
    .hero-medical-static {
        padding-bottom: 4rem;
    }
    
    .hero-content-wrapper {
        padding-top: calc(var(--space-12) + 4rem);
        padding-left: 4rem; /* px-16 */
        padding-right: 4rem;
    }
    
    .hero-inner-container {
        margin-left: 3rem; /* Shift left (away from right edge) in RTL - increased for better balance */
        max-width: calc(100% - 3rem); /* Prevent overflow */
    }
    
    /* Shift content left (RTL-aware) - add left margin to move away from right edge */
    .hero-text-content {
        margin-left: 0; /* Reset since container now handles the shift */
        padding-right: 0;
    }
}

@media (min-width: 1280px) {
    .hero-content-wrapper {
        max-width: 115rem;
    }
    
    .hero-inner-container {
        margin-left: 4rem; /* More shift on larger screens for better balance */
        max-width: calc(100% - 4rem);
    }
}

@media (min-width: 1536px) {
    .hero-content-wrapper {
        max-width: 140rem;
    }
    
    .hero-inner-container {
        margin-left: 5rem; /* Even more shift on extra large screens for optimal balance */
        max-width: calc(100% - 5rem);
    }
}

/* --- Section Backgrounds - Full Width with Alternating Colors --- */
.section-bg-1,
.section-bg-3,
.section-bg-5 {
    position: relative;
    overflow-x: hidden;
    width: 100%;
    background: var(--bg-secondary);
}

.section-bg-1::before,
.section-bg-3::before,
.section-bg-5::before {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    width: 100vw;
    left: 50%;
    margin-left: -50vw;
    z-index: 0;
    background: var(--bg-secondary);
}

.section-bg-2,
.section-bg-4,
.section-bg-6 {
    position: relative;
    overflow-x: hidden;
    width: 100%;
    background: var(--bg-primary);
}

.section-bg-2::before,
.section-bg-4::before,
.section-bg-6::before {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    width: 100vw;
    left: 50%;
    margin-left: -50vw;
    z-index: 0;
    background: var(--bg-primary);
}

.section-bg-1 > div,
.section-bg-2 > div,
.section-bg-3 > div,
.section-bg-4 > div,
.section-bg-5 > div,
.section-bg-6 > div {
    position: relative;
    z-index: 1;
}

/* --- Navigation Cards - Bento Grid Style --- */
.nav-card {
    transition: all var(--transition-base);
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-sm);
    padding: var(--space-6);
}

.nav-card:hover {
    background-color: var(--bg-card);
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
    border-color: var(--border-secondary);
}

/* --- Template Items - Clean Transitions --- */
.template-item {
    transition: all var(--transition-base);
    margin-bottom: var(--space-2);
    padding-top: var(--space-3);
    padding-bottom: var(--space-3);
    width: 100%;
    box-sizing: border-box;
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    box-shadow: var(--shadow-sm);
}

.template-item:last-child {
    margin-bottom: 0;
}

.template-item:hover {
    background-color: var(--bg-hover);
    box-shadow: var(--shadow-md);
    border-color: var(--border-secondary);
}

/* --- Input Focus States --- */
input[type="text"],
input[type="number"],
textarea,
select {
    transition: all var(--transition-fast);
    border: 1px solid var(--border-primary);
    background: var(--bg-input);
    color: var(--text-primary);
    border-radius: var(--radius-md);
}

input[type="text"]:focus,
input[type="number"]:focus,
textarea:focus,
select:focus {
    outline: none;
    border-color: var(--accent-primary);
    box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1);
    background: var(--bg-card);
}

/* --- Responsive Adjustments --- */
@media (max-width: 640px) {
    .template-item {
        padding: var(--space-2) var(--space-3) !important;
    }
    
    .crud-btn {
        padding: 0.375rem;
        width: 1.75rem;
        height: 1.75rem;
    }
}

/* Smooth transitions for interactive elements */
a, button, input, select, textarea {
    transition: all var(--transition-fast);
}

/* Ensure RTL is properly maintained */
[dir="rtl"] {
    direction: rtl;
    text-align: right;
}

[dir="rtl"] .space-x-reverse > * + * {
    margin-right: 0.5rem;
    margin-left: 0;
}

/* --- FLOATING GLASS NAVBAR --- */
#mainNavigation {
    transition: all var(--transition-base);
    margin-bottom: var(--space-6);
    background: var(--glass-bg) !important;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-2xl);
    box-shadow: var(--glass-shadow);
    margin-top: var(--space-4);
    margin-left: var(--space-4);
    margin-right: var(--space-4);
    position: sticky;
    top: var(--space-4);
    z-index: 50;
}

#mainNavigation .nav-link {
    position: relative;
    text-decoration: none;
    color: var(--text-secondary);
    transition: all var(--transition-fast);
}

#mainNavigation .nav-link:hover {
    text-decoration: none;
    color: var(--text-primary);
    background-color: var(--bg-hover);
}

#mainNavigation .nav-link.active {
    color: var(--accent-primary);
    background-color: var(--info-bg);
    font-weight: 500;
}

#mainNavigation .nav-link.active::after {
    content: '';
    position: absolute;
    bottom: 0;
    right: 0;
    left: 0;
    height: 2px;
    background-color: var(--accent-primary);
    border-radius: 2px 2px 0 0;
}

/* Mobile navigation adjustments */
@media (max-width: 640px) {
    #mainNavigation {
        border-radius: var(--radius-xl);
        margin-left: var(--space-2);
        margin-right: var(--space-2);
        margin-top: var(--space-2);
        top: var(--space-2);
    }
    
    #mainNavigation .nav-link {
        padding: 0.5rem 0.75rem;
        font-size: 0.875rem;
    }
}

/* Mobile Menu Styles */
#mobileMenu {
    box-shadow: var(--shadow-xl);
    background: var(--bg-card);
    border-left: 1px solid var(--border-primary);
}

#mobileMenu.translate-x-0 {
    transform: translateX(0);
}

#mobileMenu.translate-x-full {
    transform: translateX(100%);
}

.mobile-nav-link.active {
    color: var(--accent-primary);
    background-color: var(--info-bg);
}

/* Mobile menu RTL support */
@media (max-width: 640px) {
    #mobileMenu {
        right: 0;
        left: auto;
    }
    
    #mobileMenu.translate-x-full {
        transform: translateX(100%);
    }
    
    #mobileMenu.translate-x-0 {
        transform: translateX(0);
    }
}

/* Touch targets - minimum 44x44px for mobile */
@media (max-width: 640px) {
    button, a, .crud-btn, .template-input, .template-select {
        min-height: 44px;
        min-width: 44px;
    }
    
    .crud-btn {
        padding: 0.75rem;
        width: 44px;
        height: 44px;
    }
    
    svg {
        min-width: 24px;
        min-height: 24px;
    }
    
    .hero-medical-static {
        padding: 2rem 0 !important;
    }
    
    .hero-medical-static h1 {
        font-size: 1.875rem !important;
        line-height: 1.2 !important;
        margin-bottom: 1rem !important;
        text-align: center !important;
    }
    
    .hero-medical-static p {
        font-size: 1rem !important;
        text-align: center !important;
        margin-bottom: 1.5rem !important;
        max-width: 100% !important;
    }
    
    .hero-medical-static .flex {
        flex-direction: column !important;
        align-items: center !important;
        gap: 1rem !important;
    }
    
    .hero-medical-static button,
    .hero-medical-static a {
        width: 100% !important;
        justify-content: center !important;
    }
    
    section {
        padding: 2rem 0 !important;
    }
    
    section h2 {
        font-size: 1.5rem !important;
        text-align: center !important;
        margin-bottom: 1rem !important;
    }
    
    section p {
        font-size: 0.9375rem !important;
        text-align: center !important;
        margin-bottom: 1.5rem !important;
    }
    
    .grid {
        gap: 1rem !important;
    }
    
    .nav-card,
    .bg-\[#111111\] {
        padding: 1rem !important;
    }
    
    #globalFooter {
        text-align: center !important;
        padding: 1.5rem 0.75rem !important;
        margin-top: 1.5rem !important;
    }
    
    #globalFooter > div {
        padding: 0 !important;
        margin: 0 !important;
    }
    
    #globalFooter .grid {
        gap: 1.5rem !important;
        margin-bottom: 1rem !important;
    }
    
    #globalFooter h3 {
        text-align: center !important;
        margin-bottom: 0.75rem !important;
        font-size: 0.9375rem !important;
    }
    
    #globalFooter ul {
        text-align: center !important;
        margin: 0 !important;
        padding: 0 !important;
    }
    
    #globalFooter ul li {
        margin: 0.5rem 0 !important;
    }
    
    #globalFooter .flex {
        flex-direction: column !important;
        align-items: center !important;
        text-align: center !important;
        gap: 0.75rem !important;
    }
    
    #globalFooter .border-t {
        margin-top: 1rem !important;
        padding-top: 1rem !important;
    }
    
    body, html {
        overflow-x: hidden !important;
        max-width: 100vw !important;
    }
    
    .flex-1 {
        padding: 0.75rem !important;
        padding-top: 0.75rem !important;
    }
    
    .mb-6.sm\:mb-8,
    .mb-8.sm\:mb-10,
    .mb-12 {
        margin-bottom: 1rem !important;
    }
    
    .gap-4,
    .gap-6,
    .gap-8 {
        gap: 0.75rem !important;
    }
    
    .my-8,
    .my-12,
    .my-16 {
        margin-top: 1rem !important;
        margin-bottom: 1rem !important;
    }
    
    .max-w-7xl,
    .max-w-\[90rem\],
    .max-w-\[100rem\],
    .max-w-\[95rem\],
    .max-w-\[110rem\],
    .max-w-\[120rem\],
    .max-w-\[100rem\],
    .max-w-\[115rem\],
    .max-w-\[140rem\] {
        max-width: 100% !important;
        padding-left: 0.75rem !important;
        padding-right: 0.75rem !important;
    }
    
    #appContainer {
        padding-left: 0.75rem !important;
        padding-right: 0.75rem !important;
    }
    
    #headerContainer {
        padding-left: 0.75rem !important;
        padding-right: 0.75rem !important;
    }
    
    .lg\:grid-cols-3 {
        grid-template-columns: 1fr !important;
    }
    
    .lg\:col-span-2,
    .lg\:col-span-1 {
        grid-column: span 1 !important;
    }
    
    .template-item {
        padding-top: var(--space-2) !important;
        padding-bottom: var(--space-2) !important;
        padding-right: 0 !important;
        padding-left: 0 !important;
        margin-bottom: var(--space-2) !important;
    }
    
    .template-item-content {
        padding-right: calc(1.25rem + 0.5rem) !important; /* Mobile: chevron + gap-2 */
    }
    
    .template-item label {
        font-size: 0.875rem !important;
        line-height: 1.75 !important;
    }
    
    .template-item .block {
        display: flex !important;
        flex-wrap: wrap !important;
        align-items: center !important;
        gap: 0.25rem !important;
    }
    
    .template-item .dynamic-element {
        font-size: 0.875rem !important;
        padding: 0.25rem 0.5rem !important;
        min-width: auto !important;
        flex-shrink: 0 !important;
    }
    
    .template-item .whitespace-pre-wrap {
        white-space: normal !important;
        display: inline !important;
    }
    
    .space-y-\[2px\] > * + * {
        margin-top: 0.25rem !important;
    }
    
    .flex.flex-row {
        flex-direction: column !important;
        width: 100% !important;
    }
    
    .flex.flex-row > * {
        width: 100% !important;
        margin: 0.25rem 0 !important;
    }
}

/* --- Drag and Drop Styles --- */
.sortable-ghost {
    opacity: 0.4;
    background-color: var(--bg-hover);
    border: 2px dashed var(--accent-primary);
}

.sortable-chosen {
    transform: scale(1.02);
    box-shadow: var(--shadow-xl);
    z-index: 1000;
    border-color: var(--accent-primary);
}

.sortable-drag {
    opacity: 0.8;
}

.template-item.sortable-ghost {
    border-color: var(--accent-primary);
}

/* --- Collapsible Template Groups --- */
.template-group-header {
    user-select: none;
    transition: background-color var(--transition-fast);
    position: relative;
    background: var(--bg-card);
    border-radius: var(--radius-lg);
    padding: var(--space-4);
    margin-bottom: var(--space-2);
    border: 1px solid var(--border-primary);
}

.template-group-header:hover {
    background-color: var(--bg-hover);
    border-color: var(--border-secondary);
}

.template-group-header .chevron-icon {
    transition: transform var(--transition-base);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
}

.template-group-content {
    transition: max-height 0.3s ease-out, opacity var(--transition-base);
    opacity: 1;
    overflow: hidden;
}

.template-group-content > div {
    padding-right: 0;
    margin-right: 0;
    padding-left: 0;
    margin-left: 0;
    width: 100%;
    direction: rtl;
    box-sizing: border-box;
    /* Ensure template items align properly with group header */
    display: flex;
    flex-direction: column;
}

.template-group-content.collapsed {
    max-height: 0 !important;
    opacity: 0;
    margin-top: 0;
    margin-bottom: 0;
    padding-top: 0;
    padding-bottom: 0;
    overflow: hidden;
}

/* --- Global Footer --- */
#globalFooter {
    margin-top: auto;
    flex-shrink: 0;
    background-color: var(--bg-card);
    border-top: 1px solid var(--border-primary);
}

#globalFooter {
    font-size: 0.8125rem;
}

#globalFooter h3 {
    margin-bottom: var(--space-5);
    font-weight: 600;
    font-size: 0.875rem;
    color: var(--text-secondary);
}

#globalFooter ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

#globalFooter ul li {
    margin: 0;
    padding: 0;
}

#globalFooter a {
    display: block;
    text-decoration: none;
    transition: color var(--transition-fast);
    color: var(--text-primary);
}

#globalFooter a:hover {
    text-decoration: none;
    color: var(--accent-primary);
}

/* Additional mobile optimizations */
@media (max-width: 640px) {
    .p-4.sm\:p-6.md\:p-8.lg\:p-12.xl\:p-16 {
        padding: 1rem !important;
    }
    
    .text-right {
        text-align: center !important;
    }
    
    .flex.flex-row {
        flex-direction: column !important;
    }
    
    button:not(.crud-btn) {
        width: 100% !important;
    }
    
    .lg\:grid {
        display: flex !important;
        flex-direction: column !important;
    }
    
    .space-y-\[2px\] {
        gap: 0.5rem !important;
    }
    
    #crudModal > div {
        margin: 1rem !important;
        max-width: calc(100% - 2rem) !important;
    }
    
    .w-5.h-5,
    .w-6.h-6 {
        width: 1.5rem !important;
        height: 1.5rem !important;
    }
    
    input[type="text"],
    select,
    textarea {
        font-size: 16px !important;
    }
}

/* Footer responsive adjustments */
@media (max-width: 640px) {
    #globalFooter {
        padding-top: var(--space-8);
        padding-bottom: var(--space-8);
        margin-top: var(--space-12);
    }
    
    #globalFooter .grid {
        gap: var(--space-6);
    }
    
    #globalFooter h3 {
        margin-bottom: var(--space-3);
        font-size: 0.9375rem;
    }
}

#globalFooter ul li a {
    padding: 0.25rem 0;
    display: block;
}

#globalFooter ul li a:hover {
    transform: none;
}

@media (max-width: 640px) {
    #globalFooter .border-t {
        padding-top: var(--space-4);
    }
    
    #globalFooter .flex-col {
        text-align: center;
    }
    
    #globalFooter .flex-col .text-right {
        text-align: center;
    }
}

[dir="rtl"] #globalFooter {
    direction: rtl;
    text-align: right;
}

[dir="rtl"] #globalFooter .grid {
    direction: rtl;
}

/* --- Preview Panel - Paper Document Style --- */
#previewPanel {
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-2xl);
    box-shadow: var(--shadow-lg);
}

#previewPanel > div {
    background: var(--bg-card);
}

/* --- Modal Styles - Light Mode --- */
#crudModal {
    background: rgba(15, 23, 42, 0.4);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
}

#crudModal > div {
    background: var(--bg-card);
    border: 1px solid var(--border-primary);
    box-shadow: var(--shadow-xl);
    border-radius: var(--radius-2xl);
}

#modalTitle {
    color: var(--text-primary);
    border-bottom-color: var(--border-primary);
}

#modalContent {
    color: var(--text-primary);
}

#modalFooter {
    border-top-color: var(--border-primary);
}

/* --- Button Styles - Medical Professional --- */
button {
    transition: all var(--transition-fast);
    border-radius: var(--radius-md);
    font-weight: 500;
}

button:active {
    transform: scale(0.95);
}

button.primary,
button[class*="bg-\[#0284C7\]"],
button[class*="bg-sky"] {
    background: var(--accent-primary);
    color: white;
    box-shadow: var(--shadow-sm);
}

button.primary:hover,
button[class*="bg-\[#0284C7\]"]:hover,
button[class*="bg-sky"]:hover {
    background: var(--accent-primary-hover);
    box-shadow: var(--shadow-md);
    transform: translateY(-1px);
}

/* --- Scroll Down Arrow Animation --- */
@keyframes bounce-soft {
    0%, 100% {
        transform: translateY(0);
    }
    50% {
        transform: translateY(12px);
    }
}

.scroll-down-arrow {
    animation: bounce-soft 2s ease-in-out infinite;
    opacity: 1;
    font-weight: 500;
    filter: drop-shadow(0 2px 4px rgba(14, 165, 233, 0.2));
}

.scroll-down-arrow:hover {
    opacity: 1;
    animation-duration: 1.5s; /* Slightly faster on hover */
    filter: drop-shadow(0 4px 8px rgba(14, 165, 233, 0.3));
    transform: scale(1.1);
}

/* --- Logo Checkbox Style --- */
.logo-checkbox {
    display: flex;
    align-items: center;
    justify-content: center;
    color: #0EA5E9; /* sky-500 - matches primary button/accent color */
    flex-shrink: 0;
}

.logo-checkbox svg {
    display: block;
}

/* Ensure logo maintains static color - no hover effects */
.logo-checkbox:hover {
    color: #0EA5E9; /* Keep same color on hover */
}
